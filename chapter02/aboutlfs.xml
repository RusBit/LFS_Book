<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-partitioning-aboutlfs">
  <?dbhtml filename="aboutlfs.html"?>

  <title>Настройка переменной окружения $LFS</title>

  <para>Во многих главах и разделах книги присутствует переменная окружения <envar>LFS</envar>. До выполнения процесса сборки,  необходимо удедиться в том, что переменная определена. Переменная должна хранить путь до каталога, где будет выполняться процесс сборки LFS системы. Например, мы будем использовать каталог - <filename class="directory">/mnt/lfs</filename>. Несомненно, вы можете изменить путь на ваше усмотрение. Если сборка выполняется на отдельном разделе, каталог может быть точкой монитрования раздела. Определите каталог, где будет храниться система LFS и выполните следующую команду:</para>

<screen role="nodump"><userinput>export LFS=<replaceable>/mnt/lfs</replaceable></userinput></screen>

  <para>Having this variable set is beneficial in that commands such as
  <command>mkdir -v $LFS/tools</command> can be typed literally. The shell
  will automatically replace <quote>$LFS</quote> with
  <quote>/mnt/lfs</quote> (or whatever the variable was set to) when it
  processes the command line.</para>

  <caution>
  <para>Do not forget to check that <envar>LFS</envar> is set whenever
  you leave and reenter the current working environment (such as when doing a
  <command>su</command> to <systemitem class="username">root</systemitem> or
  another user). Check that the <envar>LFS</envar> variable is set up
  properly with:</para>

<screen role="nodump"><userinput>echo $LFS</userinput></screen>

  <para>Make sure the output shows the path to your LFS system's build
  location, which is <filename class="directory">/mnt/lfs</filename> if the
  provided example was followed. If the output is incorrect, use the command
  given earlier on this  page to set <envar>$LFS</envar> to the correct
  directory name.</para>
  </caution>

  <note><para>One way to ensure that the <envar>LFS</envar> variable is always
  set is to edit the <filename>.bash_profile</filename> file in both your
  personal home directory and in  <filename>/root/.bash_profile</filename> and
  enter the export command above.  In addition, the shell specified in the
  <filename>/etc/passwd</filename> file for all users that need the
  <envar>LFS</envar> variable needs to be bash to ensure that the
  <filename>/root/.bash_profile</filename> file is incorporated as a part of
  the login process.</para>
  
  <para>Another consideration is the method that is used to log into the
  host system.  If logging in through a graphical display manager, the
  user's <filename>.bash_profile</filename> is not normally used when
  a virtual terminal is started.  In this case, add the export command to
  the <filename>.bashrc</filename> file for the user and root.  In addition, 
  some distributions have instructions to not run the <filename>.bashrc</filename> 
  instructions in a non-interactive bash invocation.  Be sure to add the
  export command before the test for non-interactive use.</para>
  
  </note>

</sect1>
